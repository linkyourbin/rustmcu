---
date: '2025-10-04T23:58:12+08:00'
draft: true
title: 'Ssd1306'
categories : ["py32"]  
tags : ["rust", "embedded", "py32", "ssd1306"]
---

# 先说点废话

这个系列是在意料之外的，起因是，很久之前在`eeworld`论坛看了一场`rust+py32`嵌入式直播，在直播过程中，提出了一些自己的疑惑，并且得到了较为满意的答疑。😊

事后就再没关注过了，直到前几天，论坛的管理员通过预留的个人信息添加了我的微信，并且说明，我中奖了，奖品是一块`py32f030k28t6` `rust`开发板。

![](/py32/ssd1306/imgs/gift_from_live.png)

板子大概就长这个样子。

![](/py32/ssd1306/imgs/board_overview.png)

到手之后，是这样的。

![](/py32/ssd1306/imgs/raw_01.jpg)
![](/py32/ssd1306/imgs/raw_02.jpg)

焊接好了。

![](/py32/ssd1306/imgs/soldering_done.jpg)

既然都焊接好了，那就继续写（CV）点代码试一试吧！

![](/memes/good-00.jpg)

---

# 前言

查阅资料可知，`py32f030k28t6`的硬件资源大概如下：
- 32位ARM@Cortex-M0+
- 48MHz Max
- FLASH : 64K Max
- SRAM : 8K Max
- 1*12bit ADC
- 1*16bit Advanced TIM1
- 4*16bit TIM(3/14/16/17) 
- 1*LPTIM
- 1*IWDT
- 1*WWDT
- 2*SPI
- 1*IIC
- 2*USART

从x宝搜索可知，这款芯片不到1￥，如此对比的话，某些x1单片机的性价比就不值一提了。

废话不多说，搞点代码，添加一点灵魂！！！

你知道我的，肯定不可能从`svd2rust`开始写，肯定是先去最大的同性交友网站看看喽。

![](/memes/greeting-00.gif)

`Github`，启动！

很容易就找到了！！！

二次元头像，中文头像！！！我去，全是大佬！！！

![](/py32/ssd1306/imgs/github_repo_01.png)

读一读`README`，不错不错，完成度很高！

![](/py32/ssd1306/imgs/github_repo_02.png)

那还说啥了，`CV`，启动！

# CV，启动！

经过一番简单的适配后，建立好了工程。

![](/py32/ssd1306/imgs/project_done.png)

先用`ST-Link`试试。

cargo run!!!!!!!!!

![](/py32/ssd1306/imgs/falsh_ok.png)

终端信息正常，看看屏幕呢。

![](/py32/ssd1306/imgs/bingo_done.jpg)

正常显示出代码预设的内容。

```rust
//屏幕显示部分的代码
Text::with_baseline("py32", Point::zero(), text_style, Baseline::Top)
    .draw(&mut display)
    .unwrap();

Text::with_baseline("rust", Point::new(0, 16), text_style, Baseline::Top)
    .draw(&mut display)
    .unwrap();

Text::with_baseline("bin", Point::new(100, 45), text_style, Baseline::Top)
    .draw(&mut display)
    .unwrap();

let raw: ImageRaw<BinaryColor> = ImageRaw::new(include_bytes!("../rust.raw"), 64);

let im = Image::new(&raw, Point::new(32, 0));

im.draw(&mut display).unwrap();
display.flush().unwrap();
```

至此，又在一款国产芯片上，使用`rust`点亮了屏幕。

![](/memes/heyheyhey.png)

Salute!!!

感谢各位大佬卓越的贡献！！！

参考资料：

- https://github.com/py32-rs/py32-hal
- https://embassy.dev/
- https://github.com/rust-embedded-community/ssd1306
- https://www.puyasemi.com/en/py32_series.html
